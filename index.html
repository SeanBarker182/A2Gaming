<!DOCTYPE html>
<html lang="en">
  <head>
    <title>A2 Gaming</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="assets/favicon.ico" type="image/x-icon" />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Anton|Raleway:400,700|Roboto&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>

  <body>
    <script>
      /* This solution makes use of "simple access" to google, providing only an API Key.
       * This way we can only get access to public calendars. To access a private calendar,
       * we would need to use OAuth 2.0 access.
       *
       * "Simple" vs. "Authorized" access: https://developers.google.com/api-client-library/javascript/features/authentication
       * Examples of "simple" vs OAuth 2.0 access: https://developers.google.com/api-client-library/javascript/samples/samples#authorizing-and-making-authorized-requests
       *
       * We will make use of "Option 1: Load the API discovery document, then assemble the request."
       * as described in https://developers.google.com/api-client-library/javascript/start/start-js
       */
      function printCalendar() {
        // The "Calendar ID" from your calendar settings page, "Calendar Integration" secion:
        var calendarId = "a2ftwayne@gmail.com";

        // 1. Create a project using google's wizzard: https://console.developers.google.com/start/api?id=calendar
        // 2. Create credentials:
        //    a) Go to https://console.cloud.google.com/apis/credentials
        //    b) Create Credentials / API key
        //    c) Since your key will be called from any of your users' browsers, set "Application restrictions" to "None",
        //       leave "Website restrictions" blank; you may optionally set "API restrictions" to "Google Calendar API"
        var apiKey = "AIzaSyAOD2s7_35TG9z_Xxu_cAE1oS6wNzLnZso";
        // You can get a list of time zones from here: http://www.timezoneconverter.com/cgi-bin/zonehelp
        var userTimeZone = "Europe/Budapest";

        // Initializes the client with the API key and the Translate API.
        gapi.client
          .init({
            apiKey: apiKey,
            // Discovery docs docs: https://developers.google.com/api-client-library/javascript/features/discovery
            discoveryDocs: [
              "https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"
            ]
          })
          .then(function() {
            // Use Google's "apis-explorer" for research: https://developers.google.com/apis-explorer/#s/calendar/v3/
            // Events: list API docs: https://developers.google.com/calendar/v3/reference/events/list
            return gapi.client.calendar.events.list({
              calendarId: calendarId,
              timeZone: userTimeZone,
              singleEvents: true,
              timeMin: new Date().toISOString(), //gathers only events not happened yet
              maxResults: 20,
              orderBy: "startTime"
            });
          })
          .then(
            function(response) {
              if (response.result.items) {
                var calendarRows = ['<table class="wellness-calendar"><tbody>'];
                response.result.items.forEach(function(entry) {
                  var startsAt =
                    moment(entry.start.dateTime).format("L") +
                    " " +
                    moment(entry.start.dateTime).format("LT");
                  var endsAt = moment(entry.end.dateTime).format("LT");
                  calendarRows.push(
                    `<tr><td>${startsAt} - ${endsAt}</td><td>${entry.summary}</td></tr>`
                  );
                });
                calendarRows.push("</tbody></table>");
                $("#wellness-calendar").html(calendarRows.join(""));
              }
            },
            function(reason) {
              console.log("Error: " + reason.result.error.message);
            }
          );
      }

      // Loads the JavaScript client library and invokes `start` afterwards.
      gapi.load("client", printCalendar);
    </script>
    <div id="img-head">
      <!-- Begin navbar and display the logo -->
      <nav class="navbar navbar-expand-lg navbar-dark bg-transparent wrapper">
        <img src="assets/a2_logo" alt="A2 Gaming Logo" id="logo" />
        <!-- collapse button for small screen -->
        <button
          class="navbar-toggler ml-auto"
          type="button"
          data-toggle="collapse"
          data-target="#navbarNavAltMarkup"
          aria-controls="navbarNavAltMarkup"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
          <!-- Navbar Links -->
          <div class="navbar-nav ml-auto">
            <a class="nav-item nav-link" href="#">About</a>
            <a class="nav-item nav-link" href="#">Schedule</a>
            <a class="nav-item nav-link" href="#">Rates</a>
            <a class="nav-item nav-link" href="#">Contact</a>
          </div>
        </div>
      </nav>
      <!-- Display the hero text -->
      <div class="hero wrapper">
        <h1 id="hl1">WELCOME TO <img src="assets/A2.png" /></h1>
        <h2 id="hl2">FORT WAYNE'S <a id="lan">LAN</a> CENTER</h2>
        <h3 id="hl3">Tournaments｜Lounge｜Events</h3>
      </div>
    </div>
    <!-- About Section -->
    <div id="about-sec" class="wrapper">
      <h1 class="titles">WE'LL SUPPLY THE RIG</h1>
      <h2 class="subtitles">
        You just bring your A game.
      </h2>
      <div class="container-fluid">
        <div class="row">
          <div class="col-md-4">
            <img alt="Tournament" src="Assets/turn.jpg" />
            <h3 class="ail">
              Tournaments
            </h3>
          </div>
          <div class="col-md-4">
            <img alt="Lounge" src="Assets/lounge.jpg" />
            <h3 class="ail">
              Lounge
            </h3>
          </div>
          <div class="col-md-4">
            <img alt="Event" src="Assets/events.jpg" />
            <h3 class="ail">
              Events
            </h3>
          </div>
        </div>
      </div>
    </div>
    <!-- Divider that shows before the Rates section -->
    <img src="Assets/divider.png" id="pgdiv" />
    <!-- Display Rates section -->
    <div id="testbox">
      <h1 class="titles">SCHEDULE</h1>
      <hr />
      <div id="wellness-calendar"></div>
    </div>
    <!-- Display the footer -->
    <footer>
      <p>&copy; <span id="year"></span>. All rights reserved.</p>
    </footer>
    <script>
      var currentYear = new Date().getFullYear();
      var dateContainer = document.getElementById("year");
      dateContainer.innerHTML = currentYear;
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <!-- For google calendar integration -->
    <script src="https://cdn.jsdelivr.net/npm/moment@2/moment.min.js"></script>
    <script src="https://apis.google.com/js/api.js"></script>
  </body>
</html>
